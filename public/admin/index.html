<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Shivananda Admin Dashboard</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/alpinejs@3.x.x/dist/cdn.min.js" defer></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        [x-cloak] { display: none !important; }
        .sidebar-transition { transition: all 0.3s ease-in-out; }
        .fade-in { animation: fadeIn 0.3s ease-in-out; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        .loading { animation: spin 1s linear infinite; }
        @keyframes spin { from { transform: rotate(0deg); } to { transform: rotate(360deg); } }
    </style>
</head>
<body class="bg-gray-100" x-data="adminApp()" x-init="init()">
    <!-- Loading Screen -->
    <div x-show="loading" class="fixed inset-0 bg-white z-50 flex items-center justify-center" x-cloak>
        <div class="text-center">
            <div class="loading w-12 h-12 border-4 border-blue-500 border-t-transparent rounded-full mx-auto mb-4"></div>
            <p class="text-gray-600">Loading Admin Dashboard...</p>
        </div>
    </div>

    <!-- Main Layout -->
    <div x-show="!loading" class="flex h-screen" x-cloak>
        <!-- Sidebar -->
        <div :class="sidebarOpen ? 'w-64' : 'w-16'" class="sidebar-transition bg-gray-800 text-white flex flex-col">
            <!-- Logo -->
            <div class="p-4 border-b border-gray-700">
                <div class="flex items-center">
                    <i class="fas fa-building text-2xl text-blue-400"></i>
                    <span x-show="sidebarOpen" class="ml-3 text-xl font-bold" x-transition>Admin Panel</span>
                </div>
            </div>

            <!-- Navigation -->
            <nav class="flex-1 p-4">
                <ul class="space-y-2">
                    <li>
                        <button @click="currentView = 'dashboard'" 
                                :class="currentView === 'dashboard' ? 'bg-blue-600' : 'hover:bg-gray-700'"
                                class="w-full flex items-center px-3 py-2 rounded-lg transition-colors">
                            <i class="fas fa-tachometer-alt w-5"></i>
                            <span x-show="sidebarOpen" class="ml-3" x-transition>Dashboard</span>
                        </button>
                    </li>
                    <li>
                        <button @click="currentView = 'blogs'" 
                                :class="currentView === 'blogs' ? 'bg-blue-600' : 'hover:bg-gray-700'"
                                class="w-full flex items-center px-3 py-2 rounded-lg transition-colors">
                            <i class="fas fa-blog w-5"></i>
                            <span x-show="sidebarOpen" class="ml-3" x-transition>Blogs</span>
                        </button>
                    </li>
                    <li>
                        <button @click="currentView = 'products'" 
                                :class="currentView === 'products' ? 'bg-blue-600' : 'hover:bg-gray-700'"
                                class="w-full flex items-center px-3 py-2 rounded-lg transition-colors">
                            <i class="fas fa-box w-5"></i>
                            <span x-show="sidebarOpen" class="ml-3" x-transition>Products</span>
                        </button>
                    </li>
                    <li>
                        <button @click="currentView = 'contacts'" 
                                :class="currentView === 'contacts' ? 'bg-blue-600' : 'hover:bg-gray-700'"
                                class="w-full flex items-center px-3 py-2 rounded-lg transition-colors">
                            <i class="fas fa-envelope w-5"></i>
                            <span x-show="sidebarOpen" class="ml-3" x-transition>Contacts</span>
                        </button>
                    </li>
                </ul>
            </nav>

            <!-- User Info -->
            <div class="p-4 border-t border-gray-700">
                <div class="flex items-center">
                    <div class="w-8 h-8 bg-blue-500 rounded-full flex items-center justify-center">
                        <i class="fas fa-user text-sm"></i>
                    </div>
                    <div x-show="sidebarOpen" class="ml-3" x-transition>
                        <p class="text-sm font-medium" x-text="admin?.email || 'Admin'"></p>
                        <button @click="logout()" class="text-xs text-gray-400 hover:text-white">Logout</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Main Content -->
        <div class="flex-1 flex flex-col overflow-hidden">
            <!-- Top Bar -->
            <header class="bg-white shadow-sm border-b border-gray-200 px-6 py-4">
                <div class="flex items-center justify-between">
                    <div class="flex items-center">
                        <button @click="sidebarOpen = !sidebarOpen" class="text-gray-500 hover:text-gray-700">
                            <i class="fas fa-bars text-xl"></i>
                        </button>
                        <h1 class="ml-4 text-2xl font-semibold text-gray-800" x-text="getPageTitle()"></h1>
                    </div>
                    <div class="flex items-center space-x-4">
                        <span class="text-sm text-gray-500" x-text="new Date().toLocaleDateString()"></span>
                    </div>
                </div>
            </header>

            <!-- Content Area -->
            <main class="flex-1 overflow-y-auto p-6">
                <!-- Login Form -->
                <div x-show="!isAuthenticated" class="max-w-md mx-auto mt-20" x-cloak>
                    <div class="bg-white rounded-lg shadow-lg p-8">
                        <div class="text-center mb-8">
                            <i class="fas fa-building text-4xl text-blue-500 mb-4"></i>
                            <h2 class="text-2xl font-bold text-gray-800">Admin Login</h2>
                            <p class="text-gray-600">Sign in to access the admin dashboard</p>
                        </div>
                        
                        <form @submit.prevent="login()">
                            <div class="mb-6">
                                <label class="block text-sm font-medium text-gray-700 mb-2">Email</label>
                                <input type="email" x-model="loginForm.email" required
                                       class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500">
                            </div>
                            
                            <div class="mb-6">
                                <label class="block text-sm font-medium text-gray-700 mb-2">Password</label>
                                <input type="password" x-model="loginForm.password" required
                                       class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500">
                            </div>
                            
                            <button type="submit" :disabled="loginLoading"
                                    class="w-full bg-blue-600 text-white py-2 px-4 rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed">
                                <span x-show="!loginLoading">Login</span>
                                <span x-show="loginLoading" class="flex items-center justify-center">
                                    <i class="fas fa-spinner loading mr-2"></i>
                                    Logging in...
                                </span>
                            </button>
                        </form>
                        
                        <div x-show="loginError" class="mt-4 p-3 bg-red-100 border border-red-400 text-red-700 rounded" x-cloak>
                            <span x-text="loginError"></span>
                        </div>
                    </div>
                </div>

                <!-- Dashboard Content -->
                <div x-show="isAuthenticated" x-cloak>
                    <!-- Dashboard View -->
                    <div x-show="currentView === 'dashboard'" class="fade-in">
                        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8">
                            <div class="bg-white rounded-lg shadow p-6">
                                <div class="flex items-center">
                                    <div class="p-3 bg-blue-100 rounded-full">
                                        <i class="fas fa-blog text-blue-600 text-xl"></i>
                                    </div>
                                    <div class="ml-4">
                                        <p class="text-sm font-medium text-gray-600">Total Blogs</p>
                                        <p class="text-2xl font-bold text-gray-900" x-text="stats?.blogs?.total || 0"></p>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="bg-white rounded-lg shadow p-6">
                                <div class="flex items-center">
                                    <div class="p-3 bg-green-100 rounded-full">
                                        <i class="fas fa-box text-green-600 text-xl"></i>
                                    </div>
                                    <div class="ml-4">
                                        <p class="text-sm font-medium text-gray-600">Total Products</p>
                                        <p class="text-2xl font-bold text-gray-900" x-text="stats?.products?.total || 0"></p>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="bg-white rounded-lg shadow p-6">
                                <div class="flex items-center">
                                    <div class="p-3 bg-yellow-100 rounded-full">
                                        <i class="fas fa-envelope text-yellow-600 text-xl"></i>
                                    </div>
                                    <div class="ml-4">
                                        <p class="text-sm font-medium text-gray-600">New Contacts</p>
                                        <p class="text-2xl font-bold text-gray-900" x-text="stats?.contacts?.new || 0"></p>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="bg-white rounded-lg shadow p-6">
                                <div class="flex items-center">
                                    <div class="p-3 bg-purple-100 rounded-full">
                                        <i class="fas fa-eye text-purple-600 text-xl"></i>
                                    </div>
                                    <div class="ml-4">
                                        <p class="text-sm font-medium text-gray-600">Published Blogs</p>
                                        <p class="text-2xl font-bold text-gray-900" x-text="stats?.blogs?.published || 0"></p>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Recent Activity -->
                        <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                            <div class="bg-white rounded-lg shadow">
                                <div class="p-6 border-b border-gray-200">
                                    <h3 class="text-lg font-semibold text-gray-800">Recent Blogs</h3>
                                </div>
                                <div class="p-6">
                                    <div x-show="recentActivity?.blogs?.length === 0" class="text-gray-500 text-center py-4">
                                        No recent blogs
                                    </div>
                                    <div x-show="recentActivity?.blogs?.length > 0" class="space-y-4">
                                        <template x-for="blog in recentActivity?.blogs || []" :key="blog._id">
                                            <div class="flex items-center justify-between p-3 bg-gray-50 rounded-lg">
                                                <div>
                                                    <p class="font-medium text-gray-800" x-text="blog.name"></p>
                                                    <p class="text-sm text-gray-500" x-text="new Date(blog.createdAt).toLocaleDateString()"></p>
                                                </div>
                                                <span :class="blog.isPublished ? 'bg-green-100 text-green-800' : 'bg-yellow-100 text-yellow-800'" 
                                                      class="px-2 py-1 text-xs rounded-full" 
                                                      x-text="blog.isPublished ? 'Published' : 'Draft'"></span>
                                            </div>
                                        </template>
                                    </div>
                                </div>
                            </div>

                            <div class="bg-white rounded-lg shadow">
                                <div class="p-6 border-b border-gray-200">
                                    <h3 class="text-lg font-semibold text-gray-800">Recent Contacts</h3>
                                </div>
                                <div class="p-6">
                                    <div x-show="recentActivity?.contacts?.length === 0" class="text-gray-500 text-center py-4">
                                        No recent contacts
                                    </div>
                                    <div x-show="recentActivity?.contacts?.length > 0" class="space-y-4">
                                        <template x-for="contact in recentActivity?.contacts || []" :key="contact._id">
                                            <div class="flex items-center justify-between p-3 bg-gray-50 rounded-lg">
                                                <div>
                                                    <p class="font-medium text-gray-800" x-text="contact.name"></p>
                                                    <p class="text-sm text-gray-500" x-text="contact.subject"></p>
                                                </div>
                                                <span :class="getStatusColor(contact.status)" 
                                                      class="px-2 py-1 text-xs rounded-full" 
                                                      x-text="contact.status"></span>
                                            </div>
                                        </template>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Blogs Management -->
                    <div x-show="currentView === 'blogs'" class="fade-in" x-cloak>
                        <div class="bg-white rounded-lg shadow">
                            <div class="p-6 border-b border-gray-200 flex justify-between items-center">
                                <h3 class="text-lg font-semibold text-gray-800">Blog Management</h3>
                                <button @click="showBlogForm = true" class="bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700">
                                    <i class="fas fa-plus mr-2"></i>Add New Blog
                                </button>
                            </div>
                            <div class="p-6">
                                <div class="overflow-x-auto">
                                    <table class="min-w-full divide-y divide-gray-200">
                                        <thead class="bg-gray-50">
                                            <tr>
                                                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Title</th>
                                                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Status</th>
                                                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Created</th>
                                                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Actions</th>
                                            </tr>
                                        </thead>
                                        <tbody class="bg-white divide-y divide-gray-200">
                                            <template x-for="blog in blogs" :key="blog._id">
                                                <tr>
                                                    <td class="px-6 py-4 whitespace-nowrap">
                                                        <div class="text-sm font-medium text-gray-900" x-text="blog.name"></div>
                                                        <div class="text-sm text-gray-500" x-text="blog.slug"></div>
                                                    </td>
                                                    <td class="px-6 py-4 whitespace-nowrap">
                                                        <span :class="blog.isPublished ? 'bg-green-100 text-green-800' : 'bg-yellow-100 text-yellow-800'" 
                                                              class="px-2 py-1 text-xs rounded-full" 
                                                              x-text="blog.isPublished ? 'Published' : 'Draft'"></span>
                                                    </td>
                                                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500" x-text="new Date(blog.createdAt).toLocaleDateString()"></td>
                                                    <td class="px-6 py-4 whitespace-nowrap text-sm font-medium">
                                                        <button @click="editBlog(blog)" class="text-blue-600 hover:text-blue-900 mr-3">Edit</button>
                                                        <button @click="deleteBlog(blog._id)" class="text-red-600 hover:text-red-900">Delete</button>
                                                    </td>
                                                </tr>
                                            </template>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Products Management -->
                    <div x-show="currentView === 'products'" class="fade-in" x-cloak>
                        <div class="bg-white rounded-lg shadow">
                            <div class="p-6 border-b border-gray-200 flex justify-between items-center">
                                <h3 class="text-lg font-semibold text-gray-800">Product Management</h3>
                                <button @click="showProductForm = true" class="bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700">
                                    <i class="fas fa-plus mr-2"></i>Add New Product
                                </button>
                            </div>
                            <div class="p-6">
                                <div class="overflow-x-auto">
                                    <table class="min-w-full divide-y divide-gray-200">
                                        <thead class="bg-gray-50">
                                            <tr>
                                                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Name</th>
                                                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Category</th>
                                                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Status</th>
                                                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Created</th>
                                                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Actions</th>
                                            </tr>
                                        </thead>
                                        <tbody class="bg-white divide-y divide-gray-200">
                                            <template x-for="product in products" :key="product._id">
                                                <tr>
                                                    <td class="px-6 py-4 whitespace-nowrap">
                                                        <div class="text-sm font-medium text-gray-900" x-text="product.name"></div>
                                                        <div class="text-sm text-gray-500" x-text="product.slug"></div>
                                                    </td>
                                                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500" x-text="product.category"></td>
                                                    <td class="px-6 py-4 whitespace-nowrap">
                                                        <span :class="product.isActive ? 'bg-green-100 text-green-800' : 'bg-red-100 text-red-800'" 
                                                              class="px-2 py-1 text-xs rounded-full" 
                                                              x-text="product.isActive ? 'Active' : 'Inactive'"></span>
                                                    </td>
                                                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500" x-text="new Date(product.createdAt).toLocaleDateString()"></td>
                                                    <td class="px-6 py-4 whitespace-nowrap text-sm font-medium">
                                                        <button @click="editProduct(product)" class="text-blue-600 hover:text-blue-900 mr-3">Edit</button>
                                                        <button @click="deleteProduct(product._id)" class="text-red-600 hover:text-red-900">Delete</button>
                                                    </td>
                                                </tr>
                                            </template>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Contacts Management -->
                    <div x-show="currentView === 'contacts'" class="fade-in" x-cloak>
                        <div class="bg-white rounded-lg shadow">
                            <div class="p-6 border-b border-gray-200">
                                <h3 class="text-lg font-semibold text-gray-800">Contact Management</h3>
                            </div>
                            <div class="p-6">
                                <div class="overflow-x-auto">
                                    <table class="min-w-full divide-y divide-gray-200">
                                        <thead class="bg-gray-50">
                                            <tr>
                                                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Name</th>
                                                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Email</th>
                                                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Subject</th>
                                                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Status</th>
                                                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Date</th>
                                                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Actions</th>
                                            </tr>
                                        </thead>
                                        <tbody class="bg-white divide-y divide-gray-200">
                                            <template x-for="contact in contacts" :key="contact._id">
                                                <tr>
                                                    <td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900" x-text="contact.name"></td>
                                                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500" x-text="contact.email"></td>
                                                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500" x-text="contact.subject"></td>
                                                    <td class="px-6 py-4 whitespace-nowrap">
                                                        <span :class="getStatusColor(contact.status)" 
                                                              class="px-2 py-1 text-xs rounded-full" 
                                                              x-text="contact.status"></span>
                                                    </td>
                                                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500" x-text="new Date(contact.createdAt).toLocaleDateString()"></td>
                                                    <td class="px-6 py-4 whitespace-nowrap text-sm font-medium">
                                                        <button @click="viewContact(contact)" class="text-blue-600 hover:text-blue-900 mr-3">View</button>
                                                        <button @click="updateContactStatus(contact._id, 'resolved')" class="text-green-600 hover:text-green-900">Resolve</button>
                                                    </td>
                                                </tr>
                                            </template>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </main>
        </div>
    </div>

    <script>
        function adminApp() {
            return {
                loading: true,
                isAuthenticated: false,
                sidebarOpen: true,
                currentView: 'dashboard',
                admin: null,
                token: null,
                
                // Data
                stats: null,
                recentActivity: null,
                blogs: [],
                products: [],
                contacts: [],
                
                // Forms
                loginForm: {
                    email: '',
                    password: ''
                },
                loginLoading: false,
                loginError: '',
                
                // Modals
                showBlogForm: false,
                showProductForm: false,
                
                init() {
                    this.checkAuth();
                    this.loadData();
                },
                
                async checkAuth() {
                    const token = localStorage.getItem('admin_token');
                    if (token) {
                        try {
                            const response = await fetch('/api/auth/me', {
                                headers: {
                                    'Authorization': `Bearer ${token}`
                                }
                            });
                            
                            if (response.ok) {
                                const data = await response.json();
                                this.admin = data.data.admin;
                                this.token = token;
                                this.isAuthenticated = true;
                            } else {
                                localStorage.removeItem('admin_token');
                            }
                        } catch (error) {
                            console.error('Auth check failed:', error);
                            localStorage.removeItem('admin_token');
                        }
                    }
                    this.loading = false;
                },
                
                async loadData() {
                    if (!this.isAuthenticated) return;
                    
                    try {
                        await Promise.all([
                            this.loadDashboardStats(),
                            this.loadBlogs(),
                            this.loadProducts(),
                            this.loadContacts()
                        ]);
                    } catch (error) {
                        console.error('Failed to load data:', error);
                    }
                },
                
                async loadDashboardStats() {
                    try {
                        const response = await fetch('/api/admin/dashboard', {
                            headers: {
                                'Authorization': `Bearer ${this.token}`
                            }
                        });
                        
                        if (response.ok) {
                            const data = await response.json();
                            this.stats = data.data.stats;
                            this.recentActivity = data.data.recentActivity;
                        }
                    } catch (error) {
                        console.error('Failed to load dashboard stats:', error);
                    }
                },
                
                async loadBlogs() {
                    try {
                        const response = await fetch('/api/admin/blogs', {
                            headers: {
                                'Authorization': `Bearer ${this.token}`
                            }
                        });
                        
                        if (response.ok) {
                            const data = await response.json();
                            this.blogs = data.data.blogs;
                        }
                    } catch (error) {
                        console.error('Failed to load blogs:', error);
                    }
                },
                
                async loadProducts() {
                    try {
                        const response = await fetch('/api/admin/products', {
                            headers: {
                                'Authorization': `Bearer ${this.token}`
                            }
                        });
                        
                        if (response.ok) {
                            const data = await response.json();
                            this.products = data.data.products;
                        }
                    } catch (error) {
                        console.error('Failed to load products:', error);
                    }
                },
                
                async loadContacts() {
                    try {
                        const response = await fetch('/api/admin/contacts', {
                            headers: {
                                'Authorization': `Bearer ${this.token}`
                            }
                        });
                        
                        if (response.ok) {
                            const data = await response.json();
                            this.contacts = data.data.contacts;
                        }
                    } catch (error) {
                        console.error('Failed to load contacts:', error);
                    }
                },
                
                async login() {
                    this.loginLoading = true;
                    this.loginError = '';
                    
                    try {
                        const response = await fetch('/api/auth/login', {
                            method: 'POST',
                            headers: {
                                'Content-Type': 'application/json'
                            },
                            body: JSON.stringify(this.loginForm)
                        });
                        
                        const data = await response.json();
                        
                        if (response.ok) {
                            this.token = data.data.token;
                            this.admin = data.data.admin;
                            this.isAuthenticated = true;
                            localStorage.setItem('admin_token', this.token);
                            await this.loadData();
                        } else {
                            this.loginError = data.message || 'Login failed';
                        }
                    } catch (error) {
                        this.loginError = 'Network error. Please try again.';
                        console.error('Login error:', error);
                    } finally {
                        this.loginLoading = false;
                    }
                },
                
                logout() {
                    localStorage.removeItem('admin_token');
                    this.isAuthenticated = false;
                    this.admin = null;
                    this.token = null;
                    this.currentView = 'dashboard';
                },
                
                getPageTitle() {
                    const titles = {
                        'dashboard': 'Dashboard',
                        'blogs': 'Blog Management',
                        'products': 'Product Management',
                        'contacts': 'Contact Management'
                    };
                    return titles[this.currentView] || 'Admin Panel';
                },
                
                getStatusColor(status) {
                    const colors = {
                        'new': 'bg-blue-100 text-blue-800',
                        'in-progress': 'bg-yellow-100 text-yellow-800',
                        'resolved': 'bg-green-100 text-green-800',
                        'closed': 'bg-gray-100 text-gray-800'
                    };
                    return colors[status] || 'bg-gray-100 text-gray-800';
                },
                
                async deleteBlog(id) {
                    if (!confirm('Are you sure you want to delete this blog?')) return;
                    
                    try {
                        const response = await fetch(`/api/admin/blogs/${id}`, {
                            method: 'DELETE',
                            headers: {
                                'Authorization': `Bearer ${this.token}`
                            }
                        });
                        
                        if (response.ok) {
                            await this.loadBlogs();
                            await this.loadDashboardStats();
                        } else {
                            alert('Failed to delete blog');
                        }
                    } catch (error) {
                        console.error('Delete blog error:', error);
                        alert('Failed to delete blog');
                    }
                },
                
                async deleteProduct(id) {
                    if (!confirm('Are you sure you want to delete this product?')) return;
                    
                    try {
                        const response = await fetch(`/api/admin/products/${id}`, {
                            method: 'DELETE',
                            headers: {
                                'Authorization': `Bearer ${this.token}`
                            }
                        });
                        
                        if (response.ok) {
                            await this.loadProducts();
                            await this.loadDashboardStats();
                        } else {
                            alert('Failed to delete product');
                        }
                    } catch (error) {
                        console.error('Delete product error:', error);
                        alert('Failed to delete product');
                    }
                },
                
                async updateContactStatus(id, status) {
                    try {
                        const response = await fetch(`/api/admin/contacts/${id}/status`, {
                            method: 'PUT',
                            headers: {
                                'Content-Type': 'application/json',
                                'Authorization': `Bearer ${this.token}`
                            },
                            body: JSON.stringify({ status })
                        });
                        
                        if (response.ok) {
                            await this.loadContacts();
                            await this.loadDashboardStats();
                        } else {
                            alert('Failed to update contact status');
                        }
                    } catch (error) {
                        console.error('Update contact status error:', error);
                        alert('Failed to update contact status');
                    }
                },
                
                editBlog(blog) {
                    // Implement blog editing
                    console.log('Edit blog:', blog);
                },
                
                editProduct(product) {
                    // Implement product editing
                    console.log('Edit product:', product);
                },
                
                viewContact(contact) {
                    // Implement contact viewing
                    console.log('View contact:', contact);
                }
            }
        }
    </script>
</body>
</html>
